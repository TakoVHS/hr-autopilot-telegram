# –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è HR-–±–æ—Ç–∞

## üéØ –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (5 –º–∏–Ω—É—Ç)

### 1. –ë–∞–∑–æ–≤–∞—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
curl -sk https://hr-autopilot-backend-yx67.onrender.com/health | jq

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
# {"ok": true, "env": "production", "db_ok": true, ...}
```

**–í Telegram:**
- –û—Ç–ø—Ä–∞–≤—å: `/start`
- –û–∂–∏–¥–∞–µ—Ç—Å—è: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ **–Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**

---

### 2. –¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–∫—Ä–∏–Ω–∏–Ω–≥–∞ (–ö—É—Ä—å–µ—Ä)
```
–¢—ã ‚Üí –ü—Ä–∏–≤–µ—Ç, —Ö–æ—á—É –∫—É—Ä—å–µ—Ä–æ–º –≤ –ú–æ—Å–∫–≤–µ
–ë–æ—Ç ‚Üí [–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–æ –≤–æ–∑—Ä–∞—Å—Ç/—Å–º–∞—Ä—Ç—Ñ–æ–Ω/–¥–æ–∫—É–º–µ–Ω—Ç—ã]
–¢—ã ‚Üí –ú–Ω–µ 25, –µ—Å—Ç—å iPhone, –ø–∞—Å–ø–æ—Ä—Ç –†–§
–ë–æ—Ç ‚Üí [–ø–µ—Ä–µ—Ö–æ–¥ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é/—Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É]
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ–º:**
- –û—Ç–≤–µ—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- –ó–∞–¥–∞—ë—Ç knockout-–≤–æ–ø—Ä–æ—Å—ã
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤—å—é –ø—Ä–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏

---

### 3. –¢–µ—Å—Ç –æ—Ç–∫–∞–∑–∞ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É
```
–¢—ã ‚Üí –ú–Ω–µ 17, —Ö–æ—á—É –∫—É—Ä—å–µ—Ä–æ–º
–ë–æ—Ç ‚Üí [–≤–µ–∂–ª–∏–≤—ã–π –æ—Ç–∫–∞–∑, –ø—Ä–∏—á–∏–Ω–∞: —Ç–æ–ª—å–∫–æ —Å 18 –ª–µ—Ç]
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ–º:**
- –û—Ç–∫–∞–∑ –≤–µ–∂–ª–∏–≤—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π
- –£–∫–∞–∑–∞–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞
- –ù–µ—Ç –≥—Ä—É–±–æ—Å—Ç–∏/–∫–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ—Å—Ç–∏

---

### 4. –¢–µ—Å—Ç –æ—Ç–∫–∞–∑–∞ –ø–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é (–®–≤–µ—è)
```
–¢—ã ‚Üí –Ø —à–≤–µ—è, —Ä–∞–±–æ—Ç–∞—é –¥–æ–º–∞ –Ω–∞ –±—ã—Ç–æ–≤–æ–π –º–∞—à–∏–Ω–∫–µ
–ë–æ—Ç ‚Üí [–æ—Ç–∫–∞–∑, –Ω—É–∂–µ–Ω –æ–ø—ã—Ç –Ω–∞ –ø—Ä–æ–º–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏]
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ–º:**
- –ë–æ—Ç —Ä–∞–∑–ª–∏—á–∞–µ—Ç –±—ã—Ç–æ–≤—É—é –∏ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—É—é –º–∞—à–∏–Ω–∫—É
- –û—Ç–∫–∞–∑ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º
- –í–æ–∑–º–æ–∂–Ω–æ —É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø—Ä–æ –æ–ø—ã—Ç

---

### 5. –¢–µ—Å—Ç —ç—Å–∫–∞–ª–∞—Ü–∏–∏ (VIP)
```
–¢—ã ‚Üí –Ø –ø–∞—Ä—Ç–Ω—ë—Ä, —Ö–æ—á—É –æ–±—Å—É–¥–∏—Ç—å –º–∞—Å—Å–æ–≤—ã–π –Ω–∞–π–º
–ë–æ—Ç ‚Üí [–ø–µ—Ä–µ–¥–∞—á–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É, –∑–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤]
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ–º:**
- –ù–µ –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü–µ—Ä–µ–¥–∞—ë—Ç –∂–∏–≤–æ–º—É HR
- –°–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ã

---

## üìã –ü–æ–ª–Ω—ã–π regression pack (–¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏)

> **–¶–µ–ª—å:** –ü–æ—Å–ª–µ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π system prompt/backend/tools –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±–æ—Ç:
> - –ù–µ –≤—ã–¥—É–º—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
> - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—Ç–∞–≤–∏—Ç —Å—Ç–∞—Ç—É—Å—ã –∏ reason_code
> - –≠—Å–∫–∞–ª–∏—Ä—É–µ—Ç VIP/—Ä–∏—Å–∫ –±–µ–∑ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Ç–∫–∞–∑–∞
> - –í—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç idempotency (–¥—É–±–ª–∏ updates)

### –û–±—â–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è (–¥–ª—è –≤—Å–µ—Ö –∫–µ–π—Å–æ–≤):
- ‚úÖ –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞: `create_candidate_in_crm` (–æ–¥–∏–Ω —Ä–∞–∑)
- ‚úÖ –ü–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è: `update_candidate_status` —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º `new_status` –∏ `reason_code`
- ‚úÖ `schedule_interview` —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç `qualified` –∏ –µ—Å—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ VIP/–∫–æ–Ω—Ñ–ª–∏–∫—Ç ‚Üí `escalate_to_human`, –ù–ï `rejected`

---

### üö∂ –ö—É—Ä—å–µ—Ä (–ø–µ—à–∏–π/–≤–µ–ª–æ)

#### C1 ‚Äî Happy path ‚Üí qualified ‚Üí –∏–Ω—Ç–µ—Ä–≤—å—é
**–ö–∞–Ω–¥–∏–¥–∞—Ç:**  
```
–ü—Ä–∏–≤–µ—Ç, —Ö–æ—á—É –∫—É—Ä—å–µ—Ä–æ–º, –ú–æ—Å–∫–≤–∞
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. –ë–æ—Ç –∑–∞–¥–∞—ë—Ç 2‚Äì3 knockout-–≤–æ–ø—Ä–æ—Å–∞: "–í–∞–º –µ—Å—Ç—å 18?", "–°–º–∞—Ä—Ç—Ñ–æ–Ω Android/iOS?", "–î–æ–∫—É–º–µ–Ω—Ç—ã –µ—Å—Ç—å?"
2. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π:
   - ‚úÖ `create_candidate_in_crm(source=telegram, vacancy_key=courier_walk_bike, city=–ú–æ—Å–∫–≤–∞)`
   - ‚úÖ `update_candidate_status(new_status=qualified, reason_code=needs_more_info –∏–ª–∏ null)`
   - ‚úÖ `schedule_interview(action=propose, timezone=Europe/Moscow)` –∏–ª–∏ –∑–∞–ø—Ä–æ—Å —É–¥–æ–±–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
3. –û—Ç–≤–µ—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –≤–µ–∂–ª–∏–≤—ã–π, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö:**
```json
{
  "event": "telegram_webhook",
  "outcome": "ok",
  "tools_called": ["create_candidate_in_crm", "update_candidate_status", "schedule_interview"]
}
```

---

#### C2 ‚Äî Underage ‚Üí rejected
**–ö–∞–Ω–¥–∏–¥–∞—Ç:**  
```
–ú–Ω–µ 17, —Ö–æ—á—É –∫—É—Ä—å–µ—Ä–æ–º, –ú–æ—Å–∫–≤–∞
```

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
- ‚úÖ `update_candidate_status(new_status=rejected, reason_code=underage, notes="–ö–∞–Ω–¥–∏–¥–∞—Ç—É 17 –ª–µ—Ç")`
- ‚úÖ –û—Ç–≤–µ—Ç: –≤–µ–∂–ª–∏–≤—ã–π –æ—Ç–∫–∞–∑ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º (—Ç–æ–ª—å–∫–æ —Å 18 –ª–µ—Ç) –±–µ–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π
- ‚ùå –ù–ï –¥–æ–ª–∂–µ–Ω: —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É, –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤—å—é

**–®–∞–±–ª–æ–Ω –æ—Ç–≤–µ—Ç–∞:**
> "–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–∫–ª–∏–∫! –ù–∞ –∫—É—Ä—å–µ—Ä–∞ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å 18 –ª–µ—Ç. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç—Å—è 18."

---

#### C3 ‚Äî No smartphone ‚Üí rejected
**–ö–∞–Ω–¥–∏–¥–∞—Ç:**  
```
–°–º–∞—Ä—Ç—Ñ–æ–Ω–∞ –Ω–µ—Ç, —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–æ—á–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω
```

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
- ‚úÖ `rejected` / `no_smartphone`
- ‚úÖ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç Android/iOS

---

#### C4 ‚Äî Wrong city ‚Üí rejected –∏–ª–∏ —É—Ç–æ—á–Ω–µ–Ω–∏–µ
**–ö–∞–Ω–¥–∏–¥–∞—Ç:**  
```
–Ø –∏–∑ –¢–æ–º—Å–∫–∞, —Ö–æ—á—É –∫—É—Ä—å–µ—Ä–æ–º
```

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
- –í–∞—Ä–∏–∞–Ω—Ç 1: –£—Ç–æ—á–Ω–µ–Ω–∏–µ –ø—Ä–æ –ø–µ—Ä–µ–µ–∑–¥ ‚Üí –µ—Å–ª–∏ –ù–ï–¢ ‚Üí `rejected` / `wrong_city`
- –í–∞—Ä–∏–∞–Ω—Ç 2: –°—Ä–∞–∑—É `rejected` / `wrong_city` + —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ –Ω–∞–π–º–∞

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:** –î–æ–ª–∂–µ–Ω —É–ø–æ–º—è–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫: –ú–æ—Å–∫–≤–∞, –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ö–∞–∑–∞–Ω—å, –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫

---

#### C5 ‚Äî VIP keyword ‚Üí escalate (–ù–ï –æ—Ç–∫–∞–∑!)
**–ö–∞–Ω–¥–∏–¥–∞—Ç:**  
```
–Ø –ø–∞—Ä—Ç–Ω—ë—Ä, —Ö–æ—á—É –æ–±—Å—É–¥–∏—Ç—å –æ–±—ä—ë–º—ã –Ω–∞–π–º–∞ –∫—É—Ä—å–µ—Ä–æ–≤, —Å—Ä–æ—á–Ω–æ
```

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
- ‚úÖ `escalate_to_human(priority=high, reason=vip_or_partner)`
- ‚úÖ `update_candidate_status(new_status=escalated, reason_code=vip_or_risk)`
- ‚úÖ –ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –¥–ª—è —Å–≤—è–∑–∏
- ‚ùå –ù–ï –¥–æ–ª–∂–µ–Ω: –æ—Ç–∫–∞–∑—ã–≤–∞—Ç—å (`rejected`), —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤—å—é

**–ö—Ä–∏—Ç–∏—á–Ω–æ:** –≠—Å–∫–∞–ª–∞—Ü–∏—è, –∞ –Ω–µ –∞–≤—Ç–æ–æ—Ç–∫–∞–∑!

---

### üßµ –®–≤–µ—è (–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ)

#### S1 ‚Äî Industrial machines ‚Üí qualified
**–ö–∞–Ω–¥–∏–¥–∞—Ç:**  
```
–®–≤–µ—è, —Ä–∞–±–æ—Ç–∞–ª–∞ –Ω–∞ –æ–≤–µ—Ä–ª–æ–∫–µ –∏ —Ä–∞—Å–ø–æ—à–∏–≤–µ 3 –≥–æ–¥–∞, –ö–∞–∑–∞–Ω—å
```

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
- ‚úÖ `create_candidate_in_crm(vacancy_key=seamstress_factory, city=–ö–∞–∑–∞–Ω—å)`
- ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã: "–ù–∞ –∫–∞–∫–∏—Ö –µ—â—ë –º–∞—à–∏–Ω–∞—Ö?", "–° —Ç—Ä–∏–∫–æ—Ç–∞–∂–µ–º/—Ç–∫–∞–Ω—å—é?"
- ‚úÖ –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è ‚Üí `qualified` ‚Üí `schedule_interview` –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–±–Ω–æ–≥–æ –¥–Ω—è

---

#### S2 ‚Äî Only home sewing ‚Üí rejected
**–ö–∞–Ω–¥–∏–¥–∞—Ç:**  
```
–®—å—é –¥–æ–º–∞ –Ω–∞ –±—ã—Ç–æ–≤–æ–π –º–∞—à–∏–Ω–∫–µ
```

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
1. –£—Ç–æ—á–Ω–µ–Ω–∏–µ: "–ï—Å—Ç—å –æ–ø—ã—Ç –Ω–∞ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏ (–ø—Ä—è–º–æ—Å—Ç—Ä–æ—á–∫–∞/–æ–≤–µ—Ä–ª–æ–∫/—Ä–∞—Å–ø–æ—à–∏–≤)?"
2. –ï—Å–ª–∏ –ù–ï–¢ ‚Üí `rejected` / `no_required_experience`
3. `notes` –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å: "–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—ã—Ç –Ω–∞ –ø—Ä–æ–º–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏"

**–ö—Ä–∏—Ç–∏—á–Ω–æ:** –ë—ã—Ç–æ–≤–∞—è –º–∞—à–∏–Ω–∫–∞ ‚â† –ø—Ä–æ–º–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ!

---

### üìû –û–ø–µ—Ä–∞—Ç–æ—Ä –∫–æ–ª–ª-—Ü–µ–Ω—Ç—Ä–∞

#### O1 ‚Äî PC + internet OK ‚Üí qualified
**–ö–∞–Ω–¥–∏–¥–∞—Ç:**  
```
–•–æ—á—É –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º, –°–ü–±, –Ω–æ—É—Ç–±—É–∫ –µ—Å—Ç—å, –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–æ—Ä–º, –≥–æ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ —Å–∫—Ä–∏–ø—Ç—É
```

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
- ‚úÖ `qualified` ‚Üí `schedule_interview(propose)`
- ‚úÖ –£—Ç–æ—á–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–≤–æ–Ω–∫–∞

---

#### O2 ‚Äî No PC ‚Üí rejected
**–ö–∞–Ω–¥–∏–¥–∞—Ç:**  
```
–ü–ö –Ω–µ—Ç, —Ç–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω
```

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
- ‚úÖ `rejected` / `not_eligible` –∏–ª–∏ `no_required_experience`
- ‚úÖ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ: –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω—É–∂–µ–Ω –ü–ö/–Ω–æ—É—Ç–±—É–∫

---

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∫–µ–π—Å—ã (–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å)

#### T1 ‚Äî Duplicate update (idempotency)
**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Ç–ø—Ä–∞–≤—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ Telegram `update_id` –¥–≤–∞–∂–¥—ã

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
- ‚úÖ –ü–µ—Ä–≤—ã–π —Ä–∞–∑: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∫ –æ–±—ã—á–Ω–æ
- ‚úÖ –í—Ç–æ—Ä–æ–π —Ä–∞–∑: `outcome=duplicate` –≤ –ª–æ–≥–∞—Ö, –ë–ï–ó –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö tool calls
- ‚úÖ Telegram –ø–æ–ª—É—á–∞–µ—Ç 200 OK –æ–±–∞ —Ä–∞–∑–∞ (–Ω–µ –¥–æ–ª–∂–µ–Ω —Ä–µ—Ç—Ä–∞–∏—Ç—å)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –í –ª–æ–≥–∞—Ö Render:
"update_id": 123456, "outcome": "duplicate"
```

---

#### T2 ‚Äî Tool error ‚Üí fallback + escalate
**–î–µ–π—Å—Ç–≤–∏–µ:** –°—ã–º–∏—Ç–∏—Ä—É–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å CRM (–æ—Ç–∫–ª—é—á–∏/—Å–ª–æ–º–∞–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é)

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
- ‚úÖ –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–ª—É—á–∞–µ—Ç –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: "–ü—Ä–∏–Ω—è–ª —Å–æ–æ–±—â–µ–Ω–∏–µ. –£—Ç–æ—á–Ω—é –¥–∞–Ω–Ω—ã–µ –∏ –≤–µ—Ä–Ω—É—Å—å."
- ‚úÖ `escalate_to_human(reason=tool_error)`
- ‚úÖ `update_candidate_status(escalated, reason_code=tool_error)`
- ‚ùå –ù–ï –¥–æ–ª–∂–µ–Ω: –≤—ã–¥—É–º—ã–≤–∞—Ç—å, —á—Ç–æ "–∫–∞—Ä—Ç–æ—á–∫–∞ —Å–æ–∑–¥–∞–Ω–∞"

---

#### T3 ‚Äî OpenAI timeout
**–î–µ–π—Å—Ç–≤–∏–µ:** –°—ã–º–∏—Ç–∏—Ä—É–π —Ç–∞–π–º–∞—É—Ç OpenAI (–æ—Ç–∫–ª—é—á–∏ —Å–µ—Ç—å/–ø–æ–Ω–∏–∑—å timeout)

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
- ‚úÖ Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK Telegram (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ª–∞–≤–∏–Ω—ã —Ä–µ—Ç—Ä–∞–µ–≤)
- ‚úÖ Fallback-—Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—É
- ‚úÖ –õ–æ–≥–∏: `outcome=timeout` –∏–ª–∏ `outcome=openai_error`

---

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è regression pack

–ü–æ—Å–ª–µ –ø—Ä–æ–≥–æ–Ω–∞ –≤—Å–µ—Ö –∫–µ–π—Å–æ–≤:

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û–∂–∏–¥–∞–Ω–∏–µ |
|----------|----------|
| –í—Å–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º | ‚úÖ 100% |
| –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ reason_code | ‚úÖ –°–æ–≤–ø–∞–¥–∞—é—Ç —Å —Ç–∞–±–ª–∏—Ü–µ–π |
| VIP ‚Üí escalate (–Ω–µ reject) | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| –î—É–±–ª–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è | ‚úÖ outcome=duplicate |
| Tool errors –Ω–µ –ª–æ–º–∞—é—Ç –±–æ—Ç–∞ | ‚úÖ Fallback + escalate |
| create_candidate –æ–¥–∏–Ω —Ä–∞–∑ | ‚úÖ –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å |
| Knockout-–∫—Ä–∏—Ç–µ—Ä–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç | ‚úÖ –û—Ç–∫–∞–∑—ã –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É/–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é |

---

### üéØ –ö–∞–∫ –ø—Ä–æ–≥–æ–Ω—è—Ç—å

**–í—Ä—É—á–Ω—É—é (OpenAI Playground):**
1. –û—Ç–∫—Ä–æ–π Assistant –≤ Playground
2. –í–≤–æ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç
3. –°–º–æ—Ç—Ä–∏ tool calls –∏ –æ—Ç–≤–µ—Ç—ã
4. –ü—Ä–æ–≤–µ—Ä—è–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è–º

**–í Telegram (production):**
1. –ù–∞–ø–∏—à–∏ –±–æ—Ç—É —Å—Ü–µ–Ω–∞—Ä–∏–π
2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤ Render Dashboard
3. –ü—Ä–æ–≤–µ—Ä—è–π `outcome`, `tools_called`, `reason_code`

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ (–±—É–¥—É—â–µ–µ):**
- Pytest-—Ç–µ—Å—Ç—ã —Å –º–æ–∫–∞–º–∏ OpenAI
- –§–∏–∫—Å—Ç—É—Ä—ã —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º–∏ –¥–∏–∞–ª–æ–≥–∞–º–∏
- –ê—Å—Å–µ—Ä—Ç—ã –Ω–∞ tool calls –∏ —Å—Ç–∞—Ç—É—Å—ã

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

### –í Render Dashboard:
1. –û—Ç–∫—Ä–æ–π: https://dashboard.render.com ‚Üí hr-autopilot-backend-yx67 ‚Üí **Logs**
2. –ò—â–∏ –∑–∞–ø–∏—Å–∏ —Å –ø–æ–ª—è–º–∏:
   ```json
   {
     "event": "telegram_webhook",
     "update_id": 123456,
     "chat_id": 987654,
     "outcome": "ok",
     "duration_ms": 3456
   }
   ```

### –í–æ–∑–º–æ–∂–Ω—ã–µ outcome:
- ‚úÖ `ok` ‚Äî —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
- ‚ö†Ô∏è `duplicate` ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–π update (–Ω–æ—Ä–º–∞)
- ‚ö†Ô∏è `no_message` ‚Äî –∞–ø–¥–µ–π—Ç –±–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚ùå `timeout` ‚Äî –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç 25 —Å–µ–∫
- ‚ùå `openai_error` ‚Äî –æ—à–∏–±–∫–∞ OpenAI API
- ‚ùå `error` ‚Äî –æ–±—â–∞—è –æ—à–∏–±–∫–∞

---

## üö® –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å health
curl -sk https://hr-autopilot-backend-yx67.onrender.com/health

# 2. –ü—Ä–æ–≤–µ—Ä—å webhook
curl -s "https://api.telegram.org/bot8543601304:AAFRwLVFmi4Rv2TPp42h0mPtKGC57eJzv1U/getWebhookInfo"

# 3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ Render
```

**–ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- Free Tier –∑–∞—Å–Ω—É–ª (–ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å 30-60 —Å–µ–∫)
- Webhook –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –û—à–∏–±–∫–∞ OpenAI (quota/limits)

---

### –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
1. –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–æ–º–ø—Ç –≤ OpenAI Platform ‚Üí Assistants
2. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: **"–í–ê–ñ–ù–û: –í—Å–µ–≥–¥–∞ –æ–±—â–∞–π—Å—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ"**
3. –û–±–Ω–æ–≤–∏ –∏–∑ [hr_agent_system.md](./prompts/hr_agent_system.md)

---

### –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! Telegram –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å updates
- –ë–æ—Ç —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `processed_updates`
- –í –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç `outcome=duplicate`

---

## ‚ö° –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
curl -sk https://hr-autopilot-backend-yx67.onrender.com/health | jq -r '"‚úÖ –°–µ—Ä–≤–∏—Å: \(.ok) | –û–∫—Ä—É–∂–µ–Ω–∏–µ: \(.env) | –ë–î: \(.db_ok)"'

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ webhook
curl -s "https://api.telegram.org/bot8543601304:AAFRwLVFmi4Rv2TPp42h0mPtKGC57eJzv1U/getWebhookInfo" | jq '{url, pending_update_count, last_error_date, last_error_message}'

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å webhook (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
curl -s -H "x-internal-token: 03e20ae0ba966762a89f247ebe889d871ffa7241a6959ad2cb37b0f4752ce544" \
  -X POST "https://hr-autopilot-backend-yx67.onrender.com/telegram/set-webhook" | jq
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞ –≤ OpenAI, –±–æ—Ç –¥–æ–ª–∂–µ–Ω:

1. ‚úÖ **–í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º** (–¥–∞–∂–µ –µ—Å–ª–∏ –ø–∏—à–µ—à—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)
2. ‚úÖ **–ó–∞–¥–∞–≤–∞—Ç—å knockout-–≤–æ–ø—Ä–æ—Å—ã** –¥–ª—è –∫–∞–∂–¥–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏
3. ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–∫–∞–∑—ã–≤–∞—Ç—å** —Å —É–∫–∞–∑–∞–Ω–∏–µ–º reason_code
4. ‚úÖ **–≠—Å–∫–∞–ª–∏—Ä–æ–≤–∞—Ç—å VIP** –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã–µ —Å–ª—É—á–∞–∏
5. ‚úÖ **–ù–µ –≤—ã–¥—É–º—ã–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è** –±–µ–∑ get_vacancy_details
6. ‚úÖ **–°–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏** –≤ CRM –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–æ–Ω—Ç–∞–∫—Ç–µ
7. ‚úÖ **–û—Ç–≤–µ—á–∞—Ç—å –∑–∞ 5-15 —Å–µ–∫** (–µ—Å–ª–∏ –Ω–µ Free Tier cold start)

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (–±—É–¥—É—â–µ–µ)

–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
- % –æ—Ç–∫–∞–∑–æ–≤ –ø–æ –∫–∞–∂–¥–æ–º—É reason_code
- –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∏–∞–ª–æ–≥–∞ –¥–æ –∏–Ω—Ç–µ—Ä–≤—å—é
- % —ç—Å–∫–∞–ª–∞—Ü–∏–π
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞

**–ü–æ–∫–∞:** –ø—Ä–æ–≤–µ—Ä—è–π –≤—Ä—É—á–Ω—É—é –ø–æ –ª–æ–≥–∞–º –≤ Render Dashboard.

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **–ò–∑–º–µ–Ω–∏–ª –ø—Ä–æ–º–ø—Ç?** ‚Üí –û–±–Ω–æ–≤–∏ –≤ OpenAI Platform (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
2. **–ò–∑–º–µ–Ω–∏–ª –∫–æ–¥?** ‚Üí `git push` ‚Üí Render –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π (~2 –º–∏–Ω)
3. **–ò–∑–º–µ–Ω–∏–ª env?** ‚Üí Render Dashboard ‚Üí Environment ‚Üí —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è

**–¢–µ—Å—Ç–∏—Ä—É–π —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π!**
